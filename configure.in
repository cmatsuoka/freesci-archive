
AC_INIT(acinclude.m4)
AM_CONFIG_HEADER(config.h)
AM_INIT_AUTOMAKE(freesci, 0.2.5)

AC_PROG_CC
AC_PROG_RANLIB
AC_CHECK_HEADERS(sys/soundcard.h)
AC_CHECK_HEADERS(obstack.h)
AC_CHECK_HEADERS(dirent.h)
AC_CHECK_HEADERS(unistd.h)
AC_CHECK_HEADERS(readline/readline.h)
AC_CHECK_HEADERS(readline/history.h)
AC_CHECK_HEADERS(getopt.h)
AC_CHECK_FUNCS(pipe socketpair fork sched_yield memfrob)
AC_PATH_GGI
AC_PATH_CURSES
AM_PROG_LEX
AM_PATH_GLIB(1.2.0,[
		CFLAGS="$CFLAGS $GLIB_CFLAGS"
		LDFLAGS="$LDFLAGS $GLIB_LIBS"
		AC_SUBST(ac_glib_includes)
		AC_SUBST(ac_glib_libraries)
	], 
	[
#if glib was't found
		AC_MSG_ERROR([You must install a recent version of glib to compile this package!])
	])

AC_PATH_PNG

AC_ARG_WITH(efence,
	[  --with-efence            link against libefence (for debugging)],
	[LIBS="$LIBS -lefence"],
	[LIBS="$LIBS -lc"])

AC_C_PARAMETRIZED_BIGENDIAN

AC_OUTPUT(Makefile    \
	doc/Makefile \
        doc/misc/Makefile \
	src/Makefile  \
	src/core/Makefile \
	src/graphics/Makefile \
	src/include/Makefile \
	src/tools/Makefile \
	src/console/Makefile \
	src/win32/Makefile \
	src/sound/Makefile)
